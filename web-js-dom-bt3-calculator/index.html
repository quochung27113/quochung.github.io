<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
</head>

<body>
    <form name="calculator">
        <table>
            <tr>
                <td id="wrap-display" colspan="4">
                    <input id="display" type="text" name="display" disabled>
                    <input id="result" type="text" name="result" disabled>
                </td>
            </tr>
            <tr>
                <td id="clear"><input type="button" name="clear" value="C" onclick="clearDisplay()">
                </td>
                <td class="operator"><input type="button" name="parentheses(" value="("
                        onclick="calculator.display.value += '('"></td>
                <td class="operator" ><input type="button" name="Parentheses)" value=")"
                        onclick="calculator.display.value += ')'"></td>
                <td class="operator2"><input type="button" name="div" value="÷"
                        onclick="calculator.display.value += '/'"></td>
            </tr>
            <tr>
                <td class="operator" ><input type="button" id="root" name="root" value="√"
                        onclick="rootCal()"></td>
                <td class="operator" ><input type="button" name="pow" value="x²"
                        onclick="powCal()"></td>
                <!-- <td><input type="button" class="operator" name="factorial" value="!"
                        onclick="calculator.display.value += ''"></td> -->
                <td class="operator" ><input type="button" name="factorial" value="!" onclick="fatorialCal()"></td>
                <td class="operator2"><input type="button" name="times" value="×"
                        onclick="calculator.display.value += '*'"></td>
            </tr>
            <tr>
                <td><input type="button" name="seven" value="7" onclick="calculator.display.value += 7"></td>
                <td><input type="button" name="eight" value="8" onclick="calculator.display.value += 8"></td>
                <td><input type="button" name="nine" value="9" onclick="calculator.display.value += 9"></td>
                <td class="operator2"><input type="button" name="minus" value="-"
                        onclick="calculator.display.value += '-'"></td>
            </tr>

            <tr>
                <td><input type="button" name="four" value="4" onclick="calculator.display.value += 4"></td>
                <td><input type="button" name="five" value="5" onclick="calculator.display.value += 5"></td>
                <td><input type="button" name="six" value="6" onclick="calculator.display.value += 6"></td>
                <td class="operator2"><input type="button" name="plus" value="+"
                        onclick="calculator.display.value += '+'"></td>
            </tr>

            <tr>
                <td><input type="button" name="one" value="1" onclick="calculator.display.value += 1"></td>
                <td><input type="button" name="two" value="2" onclick="calculator.display.value += 2"></td>
                <td><input type="button" name="three" value="3" onclick="calculator.display.value += 3"></td>
                <td class="operator3" rowspan="2"><input type="button" class="equal" name="doit" value="=" onclick="resultDisplay()">
                </td>
            </tr>

            <tr>
                <td><input type="button" id="dot" name="dot" value="."
                        onclick="calculator.display.value += '.'"></td>
                <td><input type="button" name="zero" value="0"
                        onclick="calculator.display.value += '0'"></td>
                <td class="operator4"><input type="button" name="delete" value='←' onclick="del()"></td>
            </tr>
        </table>
    </form>
    <script>
        let result = document.getElementById("result");
        let display = document.getElementById("display");
        function del() {
            display.value = display.value.slice(0, -1);
        }
        function resultDisplay() {
            if (display.value == "") {
                console.log("chayquaday", result.value, display.value);
                result.value = 0;
                display.value = 0;
            } else {
                console.log("chayquaday2", result.value, display.value);
                console.log(result.innerHTML = `${eval(display.value)}`);
                result.value = `${eval(display.value)}`;
            }

        }
        function clearDisplay() {
            display.value = "";
            result.value = 0;
        }
        function fatorialCal(x) {
            x = display.value;
            function tinhGiaithua(x) {
                x = +x;
                let ketQua = 1;
                if (Number.isInteger(x) && x != 0 ){
                    for (let i = 2; i <= x; i++) {
                    ketQua *= i;
                    }
                console.log(display.value,typeof(display.value));
                return ketQua;
                } else {
                    console.log("giaithuachayquaday2");
                    return 0;
                }  
            }
            console.log(result.value=tinhGiaithua(x));
        }
        function rootCal(x) {
            x = display.value;
            function tinhCan(x) {
                x = +x;
                let ketQua = 0;
                console.log(x);
                if (Number.isInteger(x)) {
                    ketQua = Math.sqrt(x);
                    return ketQua;
                } else {
                    console.log("tinhCanchayquaday")
                    return 0;
                } 
            }
            result.value= tinhCan(x);
        }
        function powCal(x) {
            x = display.value;
            function tinhLuythua(x) {
                x = +x;
                let ketQua = 0;
                console.log(x);
                if (Number.isInteger(x)) {
                    ketQua = Math.pow(x, 2);
                    return ketQua;
                } else {
                    console.log("tinhLuythuachayquaday")
                    return 0;
                } 
            }
            result.value= tinhLuythua(x);
        }
    </script>
</body>

</html>